(this["webpackJsonpcode-challenge-forecast"]=this["webpackJsonpcode-challenge-forecast"]||[]).push([[0],{48:function(e,t,a){e.exports=a(81)},58:function(e,t,a){},59:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(18),i=a.n(c),l=a(8),o=a(45);var s=function(e){return e.weather.weather},u=function(e){return e.weather.loading},m=function(e){return e.weather.error},d=(a(58),function(e){return e.searchCity.cityList}),h=a(22),p=a.n(h),v=(a(59),function(e){var t=e.className,a=e.disabled,r=e.onCitySelected,c=Object(l.c)(d);return n.a.createElement("div",{className:p()("latest-cities",t)},"Latest Cities:"," ",c.map((function(e,t){return n.a.createElement("span",{key:e},n.a.createElement("button",{className:"latest-cities__city",disabled:a,type:"button",onClick:function(){return r(e)}},e),t<4&&","," ")})))}),f=function(){var e=Object(l.b)(),t=Object(l.c)(u);return n.a.createElement("div",{className:"search-city-form"},n.a.createElement(o.a,{initialValues:{city:""},validate:function(e){var t={};return e.city||(t.city="Required"),t},onSubmit:function(t){e({type:"WEATHER_FETCH_REQUESTED",payload:t.city})},validateOnMount:!0},(function(e){var a=e.values,r=e.handleChange,c=e.handleBlur,i=e.handleSubmit,l=(e.errors,e.isValid),o=e.setFieldValue;return n.a.createElement(n.a.Fragment,null,n.a.createElement("form",{className:"search-city-form__form",onSubmit:i},n.a.createElement("h1",{className:"search-city-form__header"},"City Forecast"),n.a.createElement("div",{className:"search-city-form__group"},n.a.createElement("label",{className:"search-city-form__label",htmlFor:"cityName"},"City:"," ",n.a.createElement("input",{name:"city",className:"search-city-form__input-text",type:"text",id:"cityName",onChange:r,onBlur:c,value:a.city})),n.a.createElement("button",{type:"submit",disabled:!l||t,className:"search-city-form__button"},"Search")),n.a.createElement(v,{className:"search-city-form__latest-cities",disabled:t,onCitySelected:function(e){o("city",e),setTimeout((function(){return i()}))}})))})))},y=a(9),E=a(42),_=a(47),b=a(28),w={cityList:[]};var g=a(14),O={loading:!1,error:null,weather:null};var j=Object(y.combineReducers)({searchCity:function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"ADD_CITY_TO_CITY_LIST":var n,c=null===(e=a.cityList)||void 0===e?void 0:e.find((function(e){return e===r.payload}));return c?{cityList:[r.payload].concat(Object(b.a)(null===(n=a.cityList)||void 0===n?void 0:n.filter((function(e){return e!==r.payload}))))}:{cityList:[r.payload].concat(Object(b.a)(null===(t=a.cityList)||void 0===t?void 0:t.filter((function(e,t){return t<4}))))};default:return a}},weather:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"WEATHER_FETCH_REQUESTED":return Object(g.a)(Object(g.a)({},e),{},{loading:!0,error:null,weather:null});case"WEATHER_FETCH_SUCCEEDED":return Object(g.a)(Object(g.a)({},e),{},{loading:!1,error:null,weather:t.payload});case"WEATHER_FETCH_FAILED":return Object(g.a)(Object(g.a)({},e),{},{loading:!1,weather:null,error:t.payload});default:return e}}}),N=a(7),C=a.n(N),T=a(10),x=a(43),S=a(44),H=a.n(S).a.create({baseURL:"http://api.openweathermap.org/data/2.5/"}),D=a(24),F=function e(t){var a=t.lat,r=t.lon;Object(D.a)(this,e),this.lat=void 0,this.lon=void 0,this.lat=a,this.lon=r},L=function e(t){var a=t.temp,r=t.pressure,n=t.humidity,c=t.temp_max,i=t.temp_min;Object(D.a)(this,e),this.temp=void 0,this.pressure=void 0,this.humidity=void 0,this.temp_max=void 0,this.temp_min=void 0,this.temp=a,this.pressure=r,this.humidity=n,this.temp_max=c,this.temp_min=i},R=function e(t){var a=t.coord,r=t.main,n=t.name,c=t.sys;Object(D.a)(this,e),this.coordinates=void 0,this.main=void 0,this.cityName=void 0,this.country=void 0,this.coordinates=new F(a),this.main=new L(r),this.cityName=n,this.country=c.country},k=function(){var e=Object(x.a)(C.a.mark((function e(){var t,a,r=arguments;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{city:"mendoza"},e.prev=1,e.next=4,H.get("weather",{params:{q:t.city,appid:"80fe903c6f5e04a104c9ca1a60b94e96",units:"metric"}});case 4:return a=e.sent,e.abrupt("return",new R(a.data));case 8:throw e.prev=8,e.t0=e.catch(1),console.log(e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();var A=C.a.mark(M),I=C.a.mark(U),W=C.a.mark(J);function M(e){var t;return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(T.b)((function(){return k({city:e.payload})}));case 3:return t=a.sent,a.next=6,Object(T.c)({type:"WEATHER_FETCH_SUCCEEDED",payload:t});case 6:return a.next=8,Object(T.c)({type:"ADD_CITY_TO_CITY_LIST",payload:t.cityName});case 8:a.next=14;break;case 10:return a.prev=10,a.t0=a.catch(0),a.next=14,Object(T.c)({type:"WEATHER_FETCH_FAILED",payload:a.t0});case 14:case"end":return a.stop()}}),A,null,[[0,10]])}function U(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.e)("WEATHER_FETCH_REQUESTED",M);case 2:case"end":return e.stop()}}),I)}function J(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.a)([U()]);case 2:case"end":return e.stop()}}),W)}var Y=C.a.mark(B);function B(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.a)([J].map(T.d));case 2:case"end":return e.stop()}}),Y)}var Q=Object(_.a)();var V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(E.composeWithDevTools)({}),a=Object(y.createStore)(j,e,t(Object(y.applyMiddleware)(Q)));return Q.run(B),a}(function(){try{var e=localStorage.getItem("state");return e?JSON.parse(e):void 0}catch(t){return}}());V.subscribe((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(a){}}({searchCity:V.getState().searchCity})}));var q=a(46),G=(a(78),function(){var e=Object(l.c)(s),t=Object(l.c)(u),a=Object(l.c)(m),c=Object(r.useState)(!1),i=Object(q.a)(c,2),o=i[0],d=i[1];Object(r.useEffect)((function(){d(!0)}),[e]);var h=function(){var t=null===e||void 0===e?void 0:e.coordinates,a=new F({lat:t.lat-.01246,lon:t.lon-.02038}),r=new F({lat:t.lat+.01246,lon:t.lon+.02038}),c="http://www.openstreetmap.org/export/embed.html?bbox=".concat(a.lon,",").concat(a.lat,",").concat(r.lon,",").concat(r.lat,"&layer=mapnik&marker=").concat(t.lat,",").concat(t.lon);return n.a.createElement("div",{className:"weather-result__weather-map"},o&&"Getting the map...",n.a.createElement("iframe",{className:p()({"weather-result__weather-map--hidden":o}),title:"map",width:"320",height:"350",scrolling:"no",src:c,onLoad:function(){return d(!1)}}))};return n.a.createElement("div",{className:"weather-result"},n.a.createElement("div",{className:"weather-result__container"},t&&n.a.createElement("div",{className:"weather-result__loading"},"Getting the weather..."),e&&n.a.createElement("div",{className:"weather-result__weather"},n.a.createElement("h3",{className:"weather-result__weather-header"},"Weather for ","".concat(null===e||void 0===e?void 0:e.cityName,", ").concat(null===e||void 0===e?void 0:e.country)),n.a.createElement("p",{className:"weather-result__weather-item"},n.a.createElement("strong",null,"Temperature:")," ",null===e||void 0===e?void 0:e.main.temp," \xb0C"),n.a.createElement("p",{className:"weather-result__weather-item"},n.a.createElement("strong",null,"Pressure:")," ",null===e||void 0===e?void 0:e.main.pressure," hPa"),n.a.createElement("p",{className:"weather-result__weather-item"},n.a.createElement("strong",null,"Humidity:")," ",null===e||void 0===e?void 0:e.main.humidity," %"),n.a.createElement("p",{className:"weather-result__weather-item"},n.a.createElement("strong",null,"Max temperature:")," ",null===e||void 0===e?void 0:e.main.temp_max," \xb0C"),n.a.createElement("p",{className:"weather-result__weather-item"},n.a.createElement("strong",null,"Min temperature:")," ",null===e||void 0===e?void 0:e.main.temp_min," \xb0C"),h()),a&&n.a.createElement("div",{className:"weather-result__error"},"Failed to the weather. Maybe this message could help you:"," ",function(){var e,t,r=a;return(null===r||void 0===r||null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||r.message}())))}),P=(a(79),function(){return n.a.createElement(l.a,{store:V},n.a.createElement("div",{className:"app"},n.a.createElement(f,null),n.a.createElement(G,null)))});a(80);i.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(P,null)),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.ff959b87.chunk.js.map